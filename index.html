<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ember Starter Kit</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<script type="text/x-handlebars">
    <div class="container">
        <div class="navbar">
            <div class="navbar-inner">
                <a class="brand" href="#">My blog</a>
                <ul class="nav pull-right">
                    <li>{{#link-to 'articles'}}Blog Articles{{/link-to}}</li>
                    {{#if isLogged}}
                    <li>{{#link-to 'articles.create'}}New article{{/link-to}}</li>
                    {{/if}}
                    <li>{{#link-to 'session.new'}}Login{{/link-to}} {{#link-to 'register'}}Register{{/link-to}}</li>
                    <li>{{#link-to 'logout'}}Logout{{/link-to}}</li>
                </ul>
            </div>
        </div>

     {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" id="index">
    <h1>Welcome to my blog</h1>
    {{outlet}}
</script>

<script type="text/x-handlebars" id="logout">
    <h2>{{logoutMessage}}</h2>
</script>

<script type="text/x-handlebars" id="session/new">
    <form {{action 'createSession' on='submit'}}>
        <label for="loginOrEmail">Login or Email</label>
        {{view Ember.TextField valueBinding="loginOrEmail" placeholder="Login or Email"}}
        <label for="password">Password</label>
        {{view Ember.TextField valueBinding="password" type="password" placeholder="Password"}}
        <button >Login</button>
    {{#if errorMessage}}
    <div>{{errorMessage}}</div>
    {{/if}}
    </form>
</script>

<script type="text/x-handlebars" id="register">
    <form {{action 'register' on='submit'}}>
        <p>
            <label for="loginOrEmail">Login or Email</label>
            {{view Ember.TextField valueBinding="loginOrEmail" placeholder="Please enter your login"}}
            <button {{action 'checkLogin' on='click'}}>Check login</button>
        </p>
        <p>
            <label for="password">Password</label>
            {{view Ember.TextField valueBinding="password" type="password" placeholder="Password"}}
        </p>
    {{#if errorMessage}}
    <div><font color="red"> {{errorMessage}}</font></div>
    {{else}}
    <div><font color="green">{{notifyMessage}}</font></div>
    {{/if}}
        <button >Register</button>
    </form>
</script>

<script type="text/x-handlebars" id="articles">
    {{outlet}}
</script>

<script type="text/x-handlebars" id="articles/index">
    <h1>Recent articles</h1>

    {{#each item in model}}
    {{#link-to 'article' item._id}}<h1>{{item.title}}</h1>{{/link-to}}
    <h2>by {{item.author.name}} <small class='muted'>({{format-date item.date}})</small></h2>

    <hr>

    <div class='intro'>
        {{format-markdown item.excerpt}}
    </div>

    <div class='below-the-fold'>
        {{format-markdown item.body}}
    </div>
    {{/each}}

    <div class="other">
    </div>
</script>

<script type="text/x-handlebars" id="articles/create">
    hello!
    <p>{{input type="text" value=title placeholder="please enter a title"}}</p>
    <p>{{input type="text" value=excerpt placeholder="short introduction"}}</p>
    <p>{{textarea valueBinding="body" placeholder="article"}}</p>
    {{#if savedMessage}}
    <p>{{savedMessage}}</p>
    {{#link-to 'articles'}}Go back{{/link-to}}
    {{else}}
    <p>Posted by author: {{username}} </p>
    <button {{action 'publish'}}>Publish Article</button>
    {{/if}}
</script>

<script type="text/x-handlebars" id="article">
    <h1>{{title}}</h1>
    <h2>by {{author.name}} <small class='muted'>({{format-date date}})</small></h2>
    <hr>
    <div class='intro'>
        {{format-markdown excerpt}}
    </div>

    <div class='below-the-fold'>
        {{format-markdown body}}
    </div>

    <div class="comments">
        {{#link-to 'comment'}}Commentaries:{{/link-to}}
        <p>{{outlet}}</p>
    </div>
    {{#link-to 'articles.index'}}Go Back{{/link-to}}
</script>

<script type="text/x-handlebars" id="comment">
    <table>
        {{#each item in model}}
        <tr>
            <p>{{item.body}}</p>
            <h3>by {{item.author.name}} <small class='muted'>({{format-date-std item.date}})</small></h3>
            <hr>
        </tr>
        {{/each}}
    </table>

    <p>{{textarea type="text" valueBinding="commentBody" placeholder="Write your opinion..."}}</p>
    <button {{action 'publish'}}>Write a comment</button>
</script>

<script type="text/x-handlebars" id="stuff">
    <article>
    <h3>{{title}}</h3>
    <<p>Posted by {{author}}</p>
    <p>{{body}}</p>
    </article>
</script>
<script src="js/libs/jquery-1.10.2.js"></script>
<script src="js/libs/handlebars-v2.0.0.js"></script>
<script src="js/libs/ember-1.9.1.js"></script>
<script src="js/libs/ember-data.js"></script>
<script src="js/libs/showdown.js"></script>
<script src="js/libs/moment.js"></script>
<script src="js/app.js"></script>
</body>
</html>
